- [缓存的目的和副作用](#缓存的目的和副作用)
- [浏览器缓存](#浏览器缓存)
- [CDN](#cdn)
- [nginx缓存](#nginx缓存)
- [分布式缓存](#分布式缓存)
- [进程内缓存](#进程内缓存)
  - [特点](#特点)
  - [设计关注点](#设计关注点)
  - [开源实现](#开源实现)
- [数据库缓存](#数据库缓存)

# 缓存的目的和副作用

**目的**：尽可能缩短网络请求的链路；降低响应时延；减轻服务压力；

**副作用**：需要额外处理缓存一致性问题；

**使用原则**：多读少写场景；多写场景不适合缓存；

# 浏览器缓存

场景：
1、浏览器静态资源的缓存；
2、针对特殊场景不修改的数据：

- 秒杀场景商品详情等，短时间不修改、访问频次很高的数据；

目的：
1、对于提高用户体验，加快页面响应速度很重要；
2、降低资源请求的带宽损耗；

# CDN

# nginx缓存

开启nginx缓存后，请求过的数据如果尚未过期，则立即返回；
1、减轻后端流量压力；
2、缩短请求链路，降低时延，增加访问速度；

# 分布式缓存

# 进程内缓存

进程内缓存(本地缓存)，是一个服务进程可以使用的**最快的缓存**，特点：

## 特点
- 对于服务器而言，速度最快；
- 不需要网络传输，延迟最低，不受网络环境影响；
- 内存受限，不能存储大量数据；
- 要保证分布式场景下的数据的一致性，需要专门处理，复杂度高；

## 设计关注点

0、仅针对热点数据进行本地缓存；

1、数据一致性设计：[](03_缓存一致性.md)

2、考虑内存淘汰策略，防止内存占用过多；
- 考虑合适的内存淘汰策略：LRU、LFU等；
- 考虑尽量减少数据的冗余；能复用则复用，尽量设计合理的，可用适配多种场景的数据结构；

3、数据结构的设计应该高效；

## 开源实现
1、caffeine

https://segmentfault.com/a/1190000038665523

2、Guava

2、MyBatis缓存

- 一级缓存：默认开启，且必须可重复读隔离级别
- 二级缓存：默认关闭；存在问题；

# 数据库缓存
