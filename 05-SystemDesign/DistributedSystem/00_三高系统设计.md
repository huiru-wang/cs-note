
高并发、高性能、高可用

## 高并发

目标：根据业务数据，衡量系统所需要达到的性能指标；

- QPS
- TPS
- 响应延时

观测系统性能：做好机器负载性能监控、数据库监控、JVM监控、接口链路追踪；

### 1. 优化代码

- SQL优化；索引、数据冗余减少连表；
- 多任务并行化；
- 高效的服务间通讯：高性能的通讯协议、序列化；

### 2. 缓存

写少读多场景，加速接口响应；

### 3. 异步化

- MQ：可临时存储、增强数据复用、扩展性好；
- 线程池：减少线程频繁创建开销、限制资源使用；

### 4. 选择更合适的中间件

- 大数据量的统计计算，可选用列式数据库：Clickhouse、Hbase；
- 需要高性能的搜索功能：可选择ES；

### 5. 使用更多的资源

#### 增加服务节点
- 可以选择在可预估的大流量前增加机器节点；
- 合理的负载均衡策略：静态(轮询、随机、hash)、动态(最小连接数、最小RT等)；

#### 中间件
- MySQL读写分离；(考虑是否需要强一致性)；
- MySQL冷热分离；
- Redis分片集群；
- MQ增加分区数；

## 高可用

### 1. 容灾

持久化：宕机仍然能够保证数据的一致性的能力；

限流：预防大流量超出系统负载，造成宕机；

熔断：防止故障扩散，拖垮其他服务，切断故障链路；


### 2. 补偿

重试机制：在不可预知的可能失败场景下，失败后仍能重试，提高系统的韧性；

RPC重试；

MQ消费重试；

### 3. 选择可靠性高的中间件
